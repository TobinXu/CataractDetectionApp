!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("scalar",[],t):"object"==typeof exports?exports.scalar=t():e.scalar=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){var n=e.headers,r=e.data,o=e.queryString,i=e.url,a=new XMLHttpRequest;for(var u in r="application/json"===n["Content-Type"]?JSON.stringify(r):function(e){var t=new FormData;for(var n in e)t.append(n,e[n]);return t}(r),i=function(e,t){for(var n in t){var r="/{"+n+"}";-1!==e.indexOf(r)&&(e=e.replace(r,"/"+t[n]),delete t[n])}return e.replace(/\/\{(\w+)\}/gi,"")}(i,o)+function(e){var t="";for(var n in e)t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&";return t?"?"+t.substring(0,t.length-1):t}(o),a.open(e.method,i,!0),n)a.setRequestHeader(u,n[u]);a.send(r),a.onreadystatechange=function(){if(4===a.readyState){var n=a.getResponseHeader("Content-Type"),r=a.responseURL,o=a.responseText;n&&(-1!==n.indexOf("application/json")?o=JSON.parse(o):/(application|text)\/xml/.test(n)&&(o=a.responseXML)),t({response:o,url:r,status:a.status,redirect:e.redirect&&r!==i})}}}function i(e,t,n){var r=e.status,o=e.response;if(e.redirect)return window.location=e.url;r>399?n(o,r):t(o,r)}function a(e,t,n,r){return e.method=t,e.data=n,e.queryString=r,new Promise((function(t,n){if(Worker){var r=new Blob(["self.onmessage=function(e){("+o+")(e.data,self.postMessage)}"]),a=new Worker(window.URL.createObjectURL(r));a.postMessage(e),a.onmessage=function(e){return i(e.data,t,n)}}else o(e,(function(e){return i(e,t,n)}))}))}n.r(t);var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.redirect=!0,this.headers={"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}var t,n,o;return t=e,(n=[{key:"get",value:function(e){return a(this,"GET",null,e)}},{key:"post",value:function(e,t){return a(this,"POST",e,t)}},{key:"put",value:function(e,t){return a(this,"PUT",e,t)}},{key:"delete",value:function(e){return a(this,"DELETE",null,e)}},{key:"request",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a(this,e,t.dataBody,t.queryString)}}])&&r(t.prototype,n),o&&r(t,o),e}(),c=!1;function s(e,t,n){var r=e.length-1,o=!1,i=!0;if(0===e.indexOf("_")){var a=n;(n=function(e){return!0!==a.call(t,e)&&e.preventDefault()}).uuid=a.uuid,i=!1,e=e.substring(1)}e.lastIndexOf("_")===r&&(o=!0,e=e.substring(0,r));var u=c?{passive:i,capture:o}:o;t.addEventListener(e,n,u),t.eventListenerList.push({name:e,fn:n,opt:u})}function f(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=function(r){var o=t[r];n&&"function"==typeof o&&(e.eventListenerList||(e.eventListenerList=[]),o.uuid?e.eventListenerList.find((function(e){return e.fn.uuid===o.uuid}))||s(r,e,o):(p(o),s(r,e,o)));for(var i,a=e.querySelectorAll(r),u=0;i=a[u];u++)f(i,o)};for(var o in t)r(o)}function l(e){var t="_deep_";if(e!==Object(e))return e;var n,r=t in e,o=e[t];if(r&&"function"==typeof o)return o();if(e[t]=function(){return n},e instanceof Array)n=e.map((function(e){return l(e)}));else for(var i in n={},e)n[i]=l(i!=t?e[i]:o);return r?e[t]=o:delete e[t],n}function p(e){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}));return Object.defineProperty(e,"uuid",{value:t,configurable:!1,writable:!1}),t}function d(e,t,n){e.value=t.length?function e(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t[n[o]];return t[n[o]]=++o<n.length?e(i||{},n,r,o):r,t}(e.value||{},t,n):n}document.createElement("b").addEventListener("load",null,Object.defineProperty({},"passive",{get:function(){c=!0}}));var v={};function y(e,t){var n=e.uuid;return n||(n=p(e)),v[n]=t,n}function h(e){var t=e.uuid;return t||(t=y(e,{})),v[t]}function m(e,t,n){var r=t.$element,o=r.eventListenerList,i=e.parent;if(t.exp?n=Function("p","return "+t.exp)(e.component):t.prop.forEach((function(e){n=n[e]})),function e(t,n,r){if(r.constructor===Object)for(var o in r)e(t[n],o,r[o]);else t[n]!==r&&(t[n]=r)}(t.$attribute,t.name,n),o)for(;o.length;){var a=o.shift();r.removeEventListener(a.name,a.fn,a.opt)}f(i.$node,i.events)}function b(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function g(e,t,n){var r,o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n?t?(o=n,(r=t).nodeType!==o.nodeType||3===r.nodeType&&r.textContent!==o.textContent||r.tagName!==o.tagName?e.replaceChild(t,n):3!==t.nodeType&&(!function(e,t,n){for(var r,o=0;r=t[o];o++)e.setAttribute(r.name,r.value);for(var i,a=0;i=n[a];a++)t[i.name]||e.removeAttribute(i.name)}(e.childNodes[i],t.attributes,n.attributes),x(e.childNodes[i],t.childNodes,n.childNodes))):e.removeChild(n):e.appendChild(t)}function x(e,t){var n=b(e.childNodes);t=b(t);for(var r=0;r<t.length||r<n.length;r++)g(e,t[r],n[r],r)}var w={};function k(e,t,n){var r=/\/?\s*>\s+<\s*/g;return{component:e,$node:t,tpl:n.innerHTML.trim().replace(r,"> <"),base:t.innerHTML.trim().replace(n.outerHTML,"").replace(r,"> <")}}function j(e){var t=[],n=e.tpl.match(/\$\{data\.[\w\d\.]*\}/g);if(!n)return t;n=n.map((function(e){return e.replace("${data.","").replace("}","")}));for(var r,o=new RegExp(e.tpl.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/\\\$\\\{data\\\.[\w\d\.]*\\\}/g,"(.*?)").replace(/\\\$\\\{[^\}]*\\\}/g,".*?"),"g"),i=function(){var e={};n.forEach((function(t,n){e[t]=r[n+1]})),t.push(e)};null!==(r=o.exec(e.base));)i();return t}function O(e){var t=e.nodeName;return"INPUT"===t||"TEXTAREA"===t||"SELECT"===t}function E(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"value",r=e.type;"checkbox"===r||"radio"===r?(n="checked","radio"===r&&(t=e.value===t)):"file"===r&&(n="files"),e[n]!==t&&(e[n]=t,e.dispatchEvent(new Event("mutate")))}function T(e){return"radio"===e.type?e.checked?e.value:null:"file"===e.type&&e.files?e.files:"checkbox"===e.type?e.checked:e.value||null}function L(e,t,n){var r=l(e.value);d(e,t,n),n=e.value,e.nodes.forEach((function(e){S(e,r,n)})),e.attributes.forEach((function(t){m(e,t,n)}))}function S(e,t,n){var r=e.$node,o=e.complexType,i=O(r)?"value":"innerHTML";e.prop.forEach((function(e){n=n[e],t=t[e]})),n!==t&&(o&&n?function(e,t){var n=e.$node,r=e.tpl,o=e.component,i=w[r];i||(i=w[r]=Function("data,index","return `"+r+"`"));var a=document.createElement("template");a.innerHTML=Array.isArray(t)?t.map(i).join(""):i(t),x(n,a.content.childNodes),n.dispatchEvent(new Event("mutate")),f(n,o.events,!1)}(o,n):E(r,n,i))}var P=function e(t,n){return{set:function(e,r,o){var i=l(n=n||e);return o instanceof Promise?o.then((function(o){if(Reflect.set(e,r,o))return _(t,n,i)})):Reflect.set(e,r,o)?_(t,n,i):void 0},get:function(r,o,i){var a=Reflect.get(r,o,i);if(a){var u=a.constructor;if(n=n||r,u===Function)return new Proxy(a.bind(r),function(e,t){return{apply:function(n,r,o){var i=Reflect.apply(n,r,o);return _(e,t),i}}}(t,n));if(u===Object||u===Array)return new Proxy(a,e(t,n))}return a}}};function M(e,t,n){return e.value=t,e.nodes.forEach((function(e){S(e,n,t)})),e.attributes.forEach((function(n){m(e,n,t)})),!0}function R(e,t,n,r){if(e.parentNode){var o=e.parentNode;if(o.dataset&&o.dataset.component){var i=o.dataset.component;t[i][r]&&function(e,t,n){var r=(e=h(e)).properties[n],o=Object.assign({},t.parent.events);for(var i in r.over.push(t),t.over.push(r),o)o[i]instanceof Function&&delete o[i];Object.assign(e.events,o)}(t[i],n,r)}R(e.parentNode,t,n,r)}}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;return e.over.forEach((function(e){e.value=t})),t instanceof Promise?t.then((function(t){return M(e,t,n)})):M(e,t,n)}function C(e,t,n){e.nodes.push(function(e,t,n){var r=e.value,o=null;if(r instanceof Object&&(r=function(e,t){for(var n,r=0;n=t[r];r++){if(!e[n])return"";e=e[n]}return e}(r,n)),O(t)){var i=T(t);t.addEventListener("keyup",(function(t){return L(e,n,t.target.value)})),t.addEventListener("change",(function(t){return L(e,n,T(t.target))})),null===i?E(t,r):r=i}else if("SCRIPT"===t.tagName&&"text/template"===t.type)r=j(o=k(e.parent,t.parentNode,t));else if(t.innerHTML){var a=t.querySelector('script[type="text/template"]');r=t.innerHTML,a&&(r=j(o=k(e.parent,t,a)))}else E(t,r,"innerHTML");return d(e,n,r),{prop:n,$node:t,complexType:o}}(e,t,n))}function A(e,t,n,r,o){e.attributes.push(function(e,t,n,r,o){var i=t.split("."),a=n;t=i.pop(),i.forEach((function(e){a=a[e]}));var u={name:t,$attribute:a,$element:n,prop:r,exp:o};return o?m(e,u):d(e,r,a[t]),u}(e,t,n,r,o))}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e,t){var n=function(e,t){var n=h(e),r={component:e,parent:n,value:"",nodes:[],attributes:[],over:[]};return R(n.$node,n.module.components,r,t),r}(e,t);return Object.defineProperty(e,t,{get:function(){return(t=(e=n).value)instanceof Object?(e.observable!==t&&(e.proxy=new Proxy(t,P(e)),e.observable=t),e.proxy):t;var e,t},set:function(e){return _(n,e,Object.assign({},n.value))}}),n}function q(e,t){var n=Array.from(t.querySelectorAll("[data-bind]")),r=Array.from(t.querySelectorAll("[data-attr]"));t.dataset.bind&&n.push(t),t.dataset.attr&&r.push(t),n.forEach((function(t){!function(e,t){var n=t.dataset.bind,r=h(e).properties,o=n.split(".");r[n=o.shift()]||(r[n]=$(e,n)),C(r[n],t,o)}(e,t)})),r.forEach((function(t){!function(e,t){t.dataset.attr.split(";").forEach((function(n){var r=n.indexOf(":"),o=[],i=n.substr(r+1).trim();i.replace(/'[^']*'/g,"").match(/\w[\w\._]+/g).forEach((function(t){var n=t.split("."),r=n.shift(),a=h(e).properties;a[r]||(a[r]=$(e,r)),i=i!==t?i.replace(t,"p."+t):null,o.push({props:n,value:a[r]})})),o.forEach((function(e){A(e.value,n.substr(0,r).trim(),t,e.props,i)}))}))}(e,t)}))}function H(e,t,n){var r={$node:e,module:n,properties:{}},o=t.prototype instanceof I,i=o?new t:new I;return y(i,r),r.events=o?i.listen&&i.listen():t(i),q(i,e),f(e,r.events),e.dispatchEvent(new Event("mount")),i}var I=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"inject",value:function(e){return h(this).module.inject(e)}},{key:"compose",value:function(e,t){return H(e,t,h(this).module)}},{key:"getIndex",value:function(e){var t=h(this).$node,n=e.target;do{var r=n.dataset.key;if(r)return r;n=n.parentNode}while(n!==t)}}])&&N(t.prototype,n),r&&N(t,r),e}();function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var F=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t={classes:{},instances:{},components:{},inject:function(e){var n=t.classes,r=t.instances,o=e.uuid;return n[o]&&((e=new n[o](t.inject)).uuid=o,r[o]=e,delete n[o]),r[o]}};y(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];r.forEach((function(e){e.uuid||(t.classes[p(e)]=e)}))}var t,n,r;return t=e,(n=[{key:"compose",value:function(e,t){for(var n,r=document.querySelectorAll(e),o=0;n=r[o];o++){var i=H(n,t,h(this));h(this).components[i.uuid]=i,n.dataset.component=i.uuid}return this}}])&&U(t.prototype,n),r&&U(t,r),e}();n.d(t,"Resource",(function(){return u})),n.d(t,"Module",(function(){return F})),n.d(t,"Component",(function(){return I}))},,function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(2);var r=n(0);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"set",value:function(e){this.my.msg=e}}])&&o(t.prototype,n),r&&o(t,r),e}(),a=["Hello","Hi","OK"];var u=window.location,c=u.protocol,s=u.hostname,f=u.port,l=new r.Resource(c+"//"+s+":"+f+"/response.json");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),v(this,y(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,e),n=t,(r=[{key:"listen",value:function(){var e=this;return{mount:function(){return console.log(e)},_submit:function(t){return e.add(t)},".close":{_click:function(t){return e.remove(t)}},".check":{_click:function(t){return e.crossOutItem(t)}},"#clean":{click:function(){return e.tasks=[]}}}}},{key:"remove",value:function(e){var t=this.getIndex(e);this.tasks.splice(t,1)}},{key:"add",value:function(){this.task&&(this.tasks.push({content:this.task,checked:""}),this.task="")}},{key:"crossOutItem",value:function(e){var t=this.getIndex(e),n=this.tasks[t];n.checked=n.checked?"":"checked"}}])&&d(n.prototype,r),o&&d(n,o),t}(r.Component);new r.Module(i).compose("#square",(function(e){var t=e.inject(i);return{mount:function(){return t.my=e.my},mousemove:function(t){console.log(e,t.clientX+","+t.clientY)},".open":{click:function(){e.action.replace("open","reset"),e.name=l.get()}},".paint":{click:function(){var t=this.innerText.toLowerCase();e.squareStyle={backgroundColor:t,borderRadius:"blue"!==t?".5em":"0"}}},".reset":{click:function(){return e.action.replace("reset","open"),void Object.assign(e,{name:[],squareStyle:{backgroundColor:"black",borderRadius:0}})}}}})).compose("#hello-world",(function(e){return{mount:function(){e.dependency=a,e.select2=a[0]},_submit:function(){e.inject(i).set(e.name),console.log(e)},reset:function(){return Object.assign(e,{name:"init",password:"",sexo:"F",paint:!0,select:"h",file:(t=document.createElement("input"),t.type="file",t.files)});var t},".fill":{click:function(){return Object.assign(e,{name:"Marlon Ramírez",password:"MySecretPassword",sexo:"M",paint:!1,select:"m"})}},"#select":{change:function(){e.dependency="m"===e.select?["World"]:a,e.select2=e.dependency[0]}},"datalist[data-bind]":{mutate:function(e){for(var t,n=e.target,r=document.querySelectorAll('select[list="'+n.id+'"]'),o=0;t=r[o];o++)t.innerHTML=n.innerHTML}}}})).compose("#todo",m).compose(".alert",(function(){return{".show":{click:function(e){return alert(e.target.innerText)}}}}))}])}));
//# sourceMappingURL=app.min.js.map