!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("scalar",[],n):"object"==typeof exports?exports.scalar=n():e.scalar=n()}(window,(function(){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=1)}([function(e,n,t){"use strict";function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,n){var t=e.headers,r=e.data,o=e.queryString,a=e.url,i=new XMLHttpRequest;for(var u in r="application/json"===t["Content-Type"]?JSON.stringify(r):function(e){var n=new FormData;for(var t in e)n.append(t,e[t]);return n}(r),a=function(e,n){for(var t in n){var r="/{"+t+"}";-1!==e.indexOf(r)&&(e=e.replace(r,"/"+n[t]),delete n[t])}return e.replace(/\/\{(\w+)\}/gi,"")}(a,o)+function(e){var n="";for(var t in e)n+=encodeURIComponent(t)+"="+encodeURIComponent(e[t])+"&";return n?"?"+n.substring(0,n.length-1):n}(o),i.open(e.method,a,!0),t)i.setRequestHeader(u,t[u]);i.send(r),i.onreadystatechange=function(){if(4===i.readyState){var t=i.getResponseHeader("Content-Type"),r=i.responseURL,o=i.responseText;t&&(-1!==t.indexOf("application/json")?o=JSON.parse(o):/(application|text)\/xml/.test(t)&&(o=i.responseXML)),n({response:o,url:r,status:i.status,redirect:e.redirect&&r!==a})}}}function a(e,n,t){var r=e.status,o=e.response;if(e.redirect)return window.location=e.url;r>399?t(o,r):n(o,r)}function i(e,n,t,r){return e.method=n,e.data=t,e.queryString=r,new Promise((function(n,t){if(Worker){var r=new Blob(["self.onmessage=function(e){("+o+")(e.data,self.postMessage)}"]),i=new Worker(window.URL.createObjectURL(r));i.postMessage(e),i.onmessage=function(e){return a(e.data,n,t)}}else o(e,(function(e){return a(e,n,t)}))}))}t.r(n);var u=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=n,this.redirect=!0,this.headers={"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}var n,t,o;return n=e,(t=[{key:"get",value:function(e){return i(this,"GET",null,e)}},{key:"post",value:function(e,n){return i(this,"POST",e,n)}},{key:"put",value:function(e,n){return i(this,"PUT",e,n)}},{key:"delete",value:function(e){return i(this,"DELETE",null,e)}},{key:"request",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(this,e,n.dataBody,n.queryString)}}])&&r(n.prototype,t),o&&r(n,o),e}(),c=!1;function f(e,n,t){var r=e.length-1,o=!1,a=!0;if(0===e.indexOf("_")){var i=t;(t=function(e){return!0!==i.call(n,e)&&e.preventDefault()}).uuid=i.uuid,a=!1,e=e.substring(1)}e.lastIndexOf("_")===r&&(o=!0,e=e.substring(0,r));var u=c?{passive:a,capture:o}:o;n.addEventListener(e,t,u),n.eventListenerList.push({name:e,fn:t,opt:u})}function s(e,n){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=function(r){var o=n[r];t&&"function"==typeof o&&(e.eventListenerList||(e.eventListenerList=[]),o.uuid?e.eventListenerList.find((function(e){return e.fn.uuid===o.uuid}))||f(r,e,o):(p(o),f(r,e,o)));for(var a,i=e.querySelectorAll(r),u=0;a=i[u];u++)s(a,o)};for(var o in n)r(o)}function l(e){var n="_deep_";if(e!==Object(e))return e;var t,r=n in e,o=e[n];if(r&&"function"==typeof o)return o();if(e[n]=function(){return t},e instanceof Array)t=e.map((function(e){return l(e)}));else for(var a in t={},e)t[a]=l(a!=n?e[a]:o);return r?e[n]=o:delete e[n],t}function p(e){var n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=16*Math.random()|0;return("x"==e?n:3&n|8).toString(16)}));return Object.defineProperty(e,"uuid",{value:n,configurable:!1,writable:!1}),n}function d(e,n,t){e.value=n.length?function e(n,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=n[t[o]];return n[t[o]]=++o<t.length?e(a||{},t,r,o):r,n}(e.value||{},n,t):t}document.createElement("b").addEventListener("load",null,Object.defineProperty({},"passive",{get:function(){c=!0}}));var v={};function h(e,n){var t=e.uuid;return t||(t=p(e)),v[t]=n,t}function y(e){var n=e.uuid;return n||(n=h(e,{})),v[n]}function m(e,n,t){var r=n.$element,o=r.eventListenerList,a=e.parent;if(n.exp?t=Function("p","return "+n.exp)(e.component):n.prop.forEach((function(e){t=t[e]})),function e(n,t,r){if(r.constructor===Object)for(var o in r)e(n[t],o,r[o]);else n[t]!==r&&(n[t]=r)}(n.$attribute,n.name,t),o)for(;o.length;){var i=o.shift();r.removeEventListener(i.name,i.fn,i.opt)}s(a.$node,a.events)}function b(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function g(e,n,t){var r,o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;t?n?(o=t,(r=n).nodeType!==o.nodeType||3===r.nodeType&&r.textContent!==o.textContent||r.tagName!==o.tagName?e.replaceChild(n,t):3!==n.nodeType&&(!function(e,n,t){for(var r,o=0;r=n[o];o++)e.setAttribute(r.name,r.value);for(var a,i=0;a=t[i];i++)n[a.name]||e.removeAttribute(a.name)}(e.childNodes[a],n.attributes,t.attributes),x(e.childNodes[a],n.childNodes,t.childNodes))):e.removeChild(t):e.appendChild(n)}function x(e,n){var t=b(e.childNodes);n=b(n);for(var r=0;r<n.length||r<t.length;r++)g(e,n[r],t[r],r)}var w={};function E(e,n,t){var r=/\/?\s*>\s+<\s*/g;return{component:e,$node:n,tpl:t.innerHTML.trim().replace(r,"> <"),base:n.innerHTML.trim().replace(t.outerHTML,"").replace(r,"> <")}}function j(e){var n=[],t=e.tpl.match(/\$\{data\.[\w\d\.]*\}/g);if(!t)return n;t=t.map((function(e){return e.replace("${data.","").replace("}","")}));for(var r,o=new RegExp(e.tpl.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/\\\$\\\{data\\\.[\w\d\.]*\\\}/g,"(.*?)").replace(/\\\$\\\{[^\}]*\\\}/g,".*?"),"g"),a=function(){var e={};t.forEach((function(n,t){e[n]=r[t+1]})),n.push(e)};null!==(r=o.exec(e.base));)a();return n}function T(e){var n=e.nodeName;return"INPUT"===n||"TEXTAREA"===n||"SELECT"===n}function O(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"value",r=e.type;"checkbox"===r||"radio"===r?(t="checked","radio"===r&&(n=e.value===n)):"file"===r&&(t="files"),e[t]!==n&&(e[t]=n,e.dispatchEvent(new Event("mutate")))}function L(e){return"radio"===e.type?e.checked?e.value:null:"file"===e.type&&e.files?e.files:"checkbox"===e.type?e.checked:e.value||null}function S(e,n,t){var r=l(e.value);d(e,n,t),t=e.value,e.nodes.forEach((function(e){k(e,r,t)})),e.attributes.forEach((function(n){m(e,n,t)}))}function k(e,n,t){var r=e.$node,o=e.complexType,a=T(r)?"value":"innerHTML";e.prop.forEach((function(e){t=t[e],n=n[e]})),t!==n&&(o&&t?function(e,n){var t=e.$node,r=e.tpl,o=e.component,a=w[r];a||(a=w[r]=Function("data,index","return `"+r+"`"));var i=document.createElement("template");i.innerHTML=Array.isArray(n)?n.map(a).join(""):a(n),x(t,i.content.childNodes),t.dispatchEvent(new Event("mutate")),s(t,o.events,!1)}(o,t):O(r,t,a))}var P=function e(n,t){return{set:function(e,r,o){var a=l(t=t||e);return o instanceof Promise?o.then((function(o){if(Reflect.set(e,r,o))return N(n,t,a)})):Reflect.set(e,r,o)?N(n,t,a):void 0},get:function(r,o,a){var i=Reflect.get(r,o,a);if(i){var u=i.constructor;if(t=t||r,u===Function)return new Proxy(i.bind(r),function(e,n){return{apply:function(t,r,o){var a=Reflect.apply(t,r,o);return N(e,n),a}}}(n,t));if(u===Object||u===Array)return new Proxy(i,e(n,t))}return i}}};function A(e,n,t){return e.value=n,e.nodes.forEach((function(e){k(e,t,n)})),e.attributes.forEach((function(t){m(e,t,n)})),!0}function M(e,n,t,r){if(e.parentNode){var o=e.parentNode;if(o.dataset&&o.dataset.component){var a=o.dataset.component;n[a][r]&&function(e,n,t){var r=(e=y(e)).properties[t],o=Object.assign({},n.parent.events);for(var a in r.over.push(n),n.over.push(r),o)o[a]instanceof Function&&delete o[a];Object.assign(e.events,o)}(n[a],t,r)}M(e.parentNode,n,t,r)}}function N(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2?arguments[2]:void 0;return e.over.forEach((function(e){e.value=n})),n instanceof Promise?n.then((function(n){return A(e,n,t)})):A(e,n,t)}function R(e,n,t){e.nodes.push(function(e,n,t){var r=e.value,o=null;if(r instanceof Object&&(r=function(e,n){for(var t,r=0;t=n[r];r++){if(!e[t])return"";e=e[t]}return e}(r,t)),T(n)){var a=L(n);n.addEventListener("keyup",(function(n){return S(e,t,n.target.value)})),n.addEventListener("change",(function(n){return S(e,t,L(n.target))})),null===a?O(n,r):r=a}else if("SCRIPT"===n.tagName&&"text/template"===n.type)r=j(o=E(e.parent,n.parentNode,n));else if(n.innerHTML){var i=n.querySelector('script[type="text/template"]');r=n.innerHTML,i&&(r=j(o=E(e.parent,n,i)))}else O(n,r,"innerHTML");return d(e,t,r),{prop:t,$node:n,complexType:o}}(e,n,t))}function $(e,n,t,r,o){e.attributes.push(function(e,n,t,r,o){var a=n.split("."),i=t;n=a.pop(),a.forEach((function(e){i=i[e]}));var u={name:n,$attribute:i,$element:t,prop:r,exp:o};return o?m(e,u):d(e,r,i[n]),u}(e,n,t,r,o))}function C(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,n){var t=function(e,n){var t=y(e),r={component:e,parent:t,value:"",nodes:[],attributes:[],over:[]};return M(t.$node,t.module.components,r,n),r}(e,n);return Object.defineProperty(e,n,{get:function(){return(n=(e=t).value)instanceof Object?(e.observable!==n&&(e.proxy=new Proxy(n,P(e)),e.observable=n),e.proxy):n;var e,n},set:function(e){return N(t,e,Object.assign({},t.value))}}),t}function H(e,n){var t=Array.from(n.querySelectorAll("[data-bind]")),r=Array.from(n.querySelectorAll("[data-attr]"));n.dataset.bind&&t.push(n),n.dataset.attr&&r.push(n),t.forEach((function(n){!function(e,n){var t=n.dataset.bind,r=y(e).properties,o=t.split(".");r[t=o.shift()]||(r[t]=q(e,t)),R(r[t],n,o)}(e,n)})),r.forEach((function(n){!function(e,n){n.dataset.attr.split(";").forEach((function(t){var r=t.indexOf(":"),o=[],a=t.substr(r+1).trim();a.replace(/'[^']*'/g,"").match(/\w[\w\._]+/g).forEach((function(n){var t=n.split("."),r=t.shift(),i=y(e).properties;i[r]||(i[r]=q(e,r)),a=a!==n?a.replace(n,"p."+n):null,o.push({props:t,value:i[r]})})),o.forEach((function(e){$(e.value,t.substr(0,r).trim(),n,e.props,a)}))}))}(e,n)}))}function _(e,n,t){var r={$node:e,module:t,properties:{}},o=n.prototype instanceof I,a=o?new n:new I;return h(a,r),r.events=o?a.listen&&a.listen():n(a),H(a,e),s(e,r.events),e.dispatchEvent(new Event("mount")),a}var I=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}var n,t,r;return n=e,(t=[{key:"inject",value:function(e){return y(this).module.inject(e)}},{key:"compose",value:function(e,n){return _(e,n,y(this).module)}},{key:"getIndex",value:function(e){var n=y(this).$node,t=e.target;do{var r=t.dataset.key;if(r)return r;t=t.parentNode}while(t!==n)}}])&&C(n.prototype,t),r&&C(n,r),e}();function U(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var F=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);var n={classes:{},instances:{},components:{},inject:function(e){var t=n.classes,r=n.instances,o=e.uuid;return t[o]&&((e=new t[o](n.inject)).uuid=o,r[o]=e,delete t[o]),r[o]}};h(this,n);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];r.forEach((function(e){e.uuid||(n.classes[p(e)]=e)}))}var n,t,r;return n=e,(t=[{key:"compose",value:function(e,n){for(var t,r=document.querySelectorAll(e),o=0;t=r[o];o++){var a=_(t,n,y(this));y(this).components[a.uuid]=a,t.dataset.component=a.uuid}return this}}])&&U(n.prototype,t),r&&U(n,r),e}();t.d(n,"Resource",(function(){return u})),t.d(n,"Module",(function(){return F})),t.d(n,"Component",(function(){return I}))},function(e,n,t){e.exports=t(0)}])}));
//# sourceMappingURL=scalar.min.js.map